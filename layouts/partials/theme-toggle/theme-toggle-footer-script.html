{{ if (not site.Params.disableThemeToggle) -}}
<script>
  var darkThemeColor = "{{ site.Params.assets.theme_color | default `#1D1E20` }}";
  var themeColorMeta = document.querySelector('meta[name="theme-color"]');
  if (themeColorMeta) {
    if (document.body.className.includes("dark")) {
      themeColorMeta.content = darkThemeColor;
    } else {
      themeColorMeta.content = "#F5F5F5";
    }
  }

  document.getElementById("theme-toggle").addEventListener("click", () => {
    if (document.body.className.includes("dark")) {
      document.body.classList.remove('dark');
      localStorage.setItem("pref-theme", 'light');
      if (themeColorMeta) {
        themeColorMeta.content = "#F5F5F5";
      }
    } else {
      document.body.classList.add('dark');
      localStorage.setItem("pref-theme", 'dark');
      if (themeColorMeta) {
        themeColorMeta.content = darkThemeColor;
      }
    }
  })
</script>
{{- end -}}
