{{- with $readAllowed := (.Get "private_allowed") | default (.Page.Param "private_allowed") }}
  {{- $currentProfiles := (site.Param "currentProfiles" | default slice) | append "_default" }}
  {{- if not (partial "_access_allowed.html" (dict "currentProfiles" $currentProfiles "readAllowed" $readAllowed)) }}
    {{- $.Inner | partial "minify.html" }}
  {{- end }}
{{- else }}
  {{- errorf "'private_allowed' param required in shortcode, page param (cascade allowed) or site param: %s" $.Position }}
{{- end -}}
